---
/**
 * Landing Page 3: Cost Estimator
 * Interactive cost calculator for furnace repairs
 * Shows pricing ranges for different issues and provider types
 */
import Layout from "../layouts/Layout.astro";
---

<Layout title="Furnace Repair Cost Estimator | Fix My Furnace - Michigan">

  <!-- Hero Section -->
  <section class="bg-gradient-to-br from-gray-900 via-red-900 to-gray-900 text-white py-12 md:py-16 px-6">
    <div class="container mx-auto max-w-5xl text-center">

      <!-- Urgency Badge -->
      <div class="inline-flex items-center gap-2 bg-yellow-400 text-gray-900 px-6 py-3 rounded-full font-bold mb-6 animate-pulse shadow-lg">
        <svg class="w-5 h-5" fill="currentColor" viewBox="0 0 20 20">
          <path fill-rule="evenodd" d="M10 18a8 8 0 100-16 8 8 0 000 16zm1-12a1 1 0 10-2 0v4a1 1 0 00.293.707l2.828 2.829a1 1 0 101.415-1.415L11 9.586V6z" clip-rule="evenodd"/>
        </svg>
        Same-Day Service Available ‚Ä¢ Book Today
      </div>

      <h1 class="text-4xl md:text-6xl font-black mb-6 leading-tight">
        How Much Will Your <br/>
        <span class="text-transparent bg-clip-text bg-gradient-to-r from-yellow-400 via-orange-400 to-red-400">
          Furnace Repair Cost?
        </span>
      </h1>

      <p class="text-lg md:text-2xl text-gray-300 mb-8 max-w-3xl mx-auto">
        See <strong class="text-white">real Michigan pricing</strong> instantly ‚Äî compare independent licensed techs vs. full-service companies.
      </p>

      <!-- Stats Badges -->
      <div class="flex flex-wrap justify-center gap-3 md:gap-4 mb-6">
        <div class="bg-white/10 backdrop-blur-sm px-4 md:px-6 py-2 md:py-3 rounded-full border border-white/20">
          <span class="text-xs md:text-sm font-semibold">üí∞ Transparent Pricing</span>
        </div>
        <div class="bg-white/10 backdrop-blur-sm px-4 md:px-6 py-2 md:py-3 rounded-full border border-white/20">
          <span class="text-xs md:text-sm font-semibold">‚ö° Instant Estimates</span>
        </div>
        <div class="bg-white/10 backdrop-blur-sm px-4 md:px-6 py-2 md:py-3 rounded-full border border-white/20">
          <span class="text-xs md:text-sm font-semibold">üîç Licensed Techs Only</span>
        </div>
      </div>

      <!-- Social Proof -->
      <p class="text-yellow-400 font-bold text-sm md:text-base">
        ‚òÖ‚òÖ‚òÖ‚òÖ‚òÖ 4.9/5 ‚Ä¢ Trusted by 1,200+ Michigan homeowners
      </p>

    </div>
  </section>

  <!-- Issue Selector Section -->
  <section class="py-16 px-6 bg-gradient-to-br from-gray-50 via-white to-gray-50">
    <div class="container mx-auto max-w-5xl">

      <div class="text-center mb-12">
        <h2 class="text-3xl md:text-5xl font-black text-gray-900 mb-4">
          What's Wrong With Your Furnace?
        </h2>
        <p class="text-gray-600 text-lg md:text-xl max-w-2xl mx-auto">
          Select your issue below to see <strong class="text-red-600">instant pricing estimates</strong> from both provider types
        </p>
      </div>

      <!-- Issue Grid -->
      <div class="grid md:grid-cols-2 lg:grid-cols-3 gap-6 mb-12">

        <!-- Issue 1: No Heat -->
        <button
          class="issue-card bg-white rounded-2xl p-8 border-2 border-gray-200 hover:border-red-500 hover:shadow-xl transition-all text-left group cursor-pointer"
          data-issue="no-heat"
          data-low-min="150"
          data-low-max="500"
          data-high-min="250"
          data-high-max="800"
        >
          <div class="w-14 h-14 bg-red-100 rounded-xl flex items-center justify-center mb-4 group-hover:bg-red-500 group-hover:scale-110 transition-all">
            <svg class="w-8 h-8 text-red-600 group-hover:text-white" fill="currentColor" viewBox="0 0 20 20">
              <path fill-rule="evenodd" d="M13.477 14.89A6 6 0 015.11 6.524l8.367 8.368zm1.414-1.414L6.524 5.11a6 6 0 018.367 8.367zM18 10a8 8 0 11-16 0 8 8 0 0116 0z" clip-rule="evenodd"/>
            </svg>
          </div>
          <h3 class="text-xl font-bold text-gray-900 mb-2 group-hover:text-red-600 transition-colors">
            No Heat At All
          </h3>
          <p class="text-gray-600 text-sm">
            Furnace won't turn on or blows cold air
          </p>
        </button>

        <!-- Issue 2: Strange Noises -->
        <button
          class="issue-card bg-white rounded-2xl p-8 border-2 border-gray-200 hover:border-red-500 hover:shadow-xl transition-all text-left group cursor-pointer"
          data-issue="strange-noises"
          data-low-min="100"
          data-low-max="400"
          data-high-min="150"
          data-high-max="600"
        >
          <div class="w-14 h-14 bg-orange-100 rounded-xl flex items-center justify-center mb-4 group-hover:bg-orange-500 group-hover:scale-110 transition-all">
            <svg class="w-8 h-8 text-orange-600 group-hover:text-white" fill="currentColor" viewBox="0 0 20 20">
              <path d="M18 3a1 1 0 00-1.196-.98l-10 2A1 1 0 006 5v9.114A4.369 4.369 0 005 14c-1.657 0-3 .895-3 2s1.343 2 3 2 3-.895 3-2V7.82l8-1.6v5.894A4.37 4.37 0 0015 12c-1.657 0-3 .895-3 2s1.343 2 3 2 3-.895 3-2V3z"/>
            </svg>
          </div>
          <h3 class="text-xl font-bold text-gray-900 mb-2 group-hover:text-red-600 transition-colors">
            Strange Noises
          </h3>
          <p class="text-gray-600 text-sm">
            Banging, rattling, squealing, or grinding sounds
          </p>
        </button>

        <!-- Issue 3: Uneven Heating -->
        <button
          class="issue-card bg-white rounded-2xl p-8 border-2 border-gray-200 hover:border-red-500 hover:shadow-xl transition-all text-left group cursor-pointer"
          data-issue="uneven-heating"
          data-low-min="125"
          data-low-max="450"
          data-high-min="200"
          data-high-max="700"
        >
          <div class="w-14 h-14 bg-yellow-100 rounded-xl flex items-center justify-center mb-4 group-hover:bg-yellow-500 group-hover:scale-110 transition-all">
            <svg class="w-8 h-8 text-yellow-600 group-hover:text-white" fill="currentColor" viewBox="0 0 20 20">
              <path fill-rule="evenodd" d="M12 1.586l-4 4v12.828l4-4V1.586zM3.707 3.293A1 1 0 002 4v10a1 1 0 00.293.707L6 18.414V5.586L3.707 3.293zM17.707 5.293L14 1.586v12.828l2.293 2.293A1 1 0 0018 16V6a1 1 0 00-.293-.707z" clip-rule="evenodd"/>
            </svg>
          </div>
          <h3 class="text-xl font-bold text-gray-900 mb-2 group-hover:text-red-600 transition-colors">
            Uneven Heating
          </h3>
          <p class="text-gray-600 text-sm">
            Some rooms hot, others cold
          </p>
        </button>

        <!-- Issue 4: High Energy Bills -->
        <button
          class="issue-card bg-white rounded-2xl p-8 border-2 border-gray-200 hover:border-red-500 hover:shadow-xl transition-all text-left group cursor-pointer"
          data-issue="high-bills"
          data-low-min="125"
          data-low-max="350"
          data-high-min="175"
          data-high-max="550"
        >
          <div class="w-14 h-14 bg-green-100 rounded-xl flex items-center justify-center mb-4 group-hover:bg-green-500 group-hover:scale-110 transition-all">
            <svg class="w-8 h-8 text-green-600 group-hover:text-white" fill="currentColor" viewBox="0 0 20 20">
              <path d="M8.433 7.418c.155-.103.346-.196.567-.267v1.698a2.305 2.305 0 01-.567-.267C8.07 8.34 8 8.114 8 8c0-.114.07-.34.433-.582zM11 12.849v-1.698c.22.071.412.164.567.267.364.243.433.468.433.582 0 .114-.07.34-.433.582a2.305 2.305 0 01-.567.267z"/>
              <path fill-rule="evenodd" d="M10 18a8 8 0 100-16 8 8 0 000 16zm1-13a1 1 0 10-2 0v.092a4.535 4.535 0 00-1.676.662C6.602 6.234 6 7.009 6 8c0 .99.602 1.765 1.324 2.246.48.32 1.054.545 1.676.662v1.941c-.391-.127-.68-.317-.843-.504a1 1 0 10-1.51 1.31c.562.649 1.413 1.076 2.353 1.253V15a1 1 0 102 0v-.092a4.535 4.535 0 001.676-.662C13.398 13.766 14 12.991 14 12c0-.99-.602-1.765-1.324-2.246A4.535 4.535 0 0011 9.092V7.151c.391.127.68.317.843.504a1 1 0 101.511-1.31c-.563-.649-1.413-1.076-2.354-1.253V5z" clip-rule="evenodd"/>
            </svg>
          </div>
          <h3 class="text-xl font-bold text-gray-900 mb-2 group-hover:text-red-600 transition-colors">
            High Energy Bills
          </h3>
          <p class="text-gray-600 text-sm">
            Running constantly or inefficiently
          </p>
        </button>

        <!-- Issue 5: Frequent Cycling -->
        <button
          class="issue-card bg-white rounded-2xl p-8 border-2 border-gray-200 hover:border-red-500 hover:shadow-xl transition-all text-left group cursor-pointer"
          data-issue="cycling"
          data-low-min="100"
          data-low-max="375"
          data-high-min="150"
          data-high-max="575"
        >
          <div class="w-14 h-14 bg-blue-100 rounded-xl flex items-center justify-center mb-4 group-hover:bg-blue-500 group-hover:scale-110 transition-all">
            <svg class="w-8 h-8 text-blue-600 group-hover:text-white" fill="currentColor" viewBox="0 0 20 20">
              <path fill-rule="evenodd" d="M4 2a1 1 0 011 1v2.101a7.002 7.002 0 0111.601 2.566 1 1 0 11-1.885.666A5.002 5.002 0 005.999 7H9a1 1 0 010 2H4a1 1 0 01-1-1V3a1 1 0 011-1zm.008 9.057a1 1 0 011.276.61A5.002 5.002 0 0014.001 13H11a1 1 0 110-2h5a1 1 0 011 1v5a1 1 0 11-2 0v-2.101a7.002 7.002 0 01-11.601-2.566 1 1 0 01.61-1.276z" clip-rule="evenodd"/>
            </svg>
          </div>
          <h3 class="text-xl font-bold text-gray-900 mb-2 group-hover:text-red-600 transition-colors">
            Frequent Cycling
          </h3>
          <p class="text-gray-600 text-sm">
            Turning on and off repeatedly
          </p>
        </button>

        <!-- Issue 6: Old System / Replacement -->
        <button
          class="issue-card bg-white rounded-2xl p-8 border-2 border-gray-200 hover:border-red-500 hover:shadow-xl transition-all text-left group cursor-pointer"
          data-issue="replacement"
          data-low-min="2800"
          data-low-max="5500"
          data-high-min="4500"
          data-high-max="9000"
        >
          <div class="w-14 h-14 bg-purple-100 rounded-xl flex items-center justify-center mb-4 group-hover:bg-purple-500 group-hover:scale-110 transition-all">
            <svg class="w-8 h-8 text-purple-600 group-hover:text-white" fill="currentColor" viewBox="0 0 20 20">
              <path fill-rule="evenodd" d="M10 18a8 8 0 100-16 8 8 0 000 16zm1-11a1 1 0 10-2 0v3.586L7.707 9.293a1 1 0 00-1.414 1.414l3 3a1 1 0 001.414 0l3-3a1 1 0 00-1.414-1.414L11 10.586V7z" clip-rule="evenodd"/>
            </svg>
          </div>
          <h3 class="text-xl font-bold text-gray-900 mb-2 group-hover:text-red-600 transition-colors">
            Full Replacement
          </h3>
          <p class="text-gray-600 text-sm">
            Old system needs complete replacement
          </p>
        </button>

      </div>

      <!-- Results Container (Hidden Initially) -->
      <div id="results-container" class="hidden">

        <!-- Selected Issue Display -->
        <div class="bg-gradient-to-r from-red-600 to-orange-600 rounded-2xl p-8 text-white text-center mb-8">
          <p class="text-sm uppercase tracking-wide mb-2 opacity-90">Estimated Cost For:</p>
          <h3 id="selected-issue-title" class="text-3xl md:text-4xl font-black mb-2"></h3>
          <p class="text-red-100 text-sm">Based on 7,500+ Michigan jobs completed in 2024</p>
        </div>

        <!-- Pricing Comparison -->
        <div class="grid md:grid-cols-2 gap-8 mb-12">

          <!-- Licensed Independent Tech -->
          <div class="bg-white rounded-2xl shadow-2xl overflow-hidden border-2 border-blue-200 relative">
            <div class="absolute top-4 right-4 bg-green-500 text-white px-4 py-2 rounded-full text-sm font-bold shadow-lg">
              üí∞ BEST VALUE
            </div>
            <div class="bg-gradient-to-r from-blue-600 to-blue-700 text-white p-8 text-center">
              <h4 class="text-2xl font-black mb-2">Licensed Independent Tech</h4>
              <p class="text-blue-100 text-sm">Lower overhead, same expertise</p>
            </div>
            <div class="p-8">
              <div class="text-center mb-6">
                <p class="text-5xl md:text-6xl font-black text-blue-600 mb-2">
                  $<span id="low-min">0</span> - $<span id="low-max">0</span>
                </p>
                <p class="text-gray-500 text-sm">Typical Range</p>
              </div>
              <ul class="space-y-3 text-gray-700">
                <li class="flex items-start gap-3">
                  <svg class="w-5 h-5 text-green-500 mt-1 flex-shrink-0" fill="currentColor" viewBox="0 0 20 20">
                    <path fill-rule="evenodd" d="M10 18a8 8 0 100-16 8 8 0 000 16zm3.707-9.293a1 1 0 00-1.414-1.414L9 10.586 7.707 9.293a1 1 0 00-1.414 1.414l2 2a1 1 0 001.414 0l4-4z" clip-rule="evenodd"/>
                  </svg>
                  <span>Fully licensed & insured</span>
                </li>
                <li class="flex items-start gap-3">
                  <svg class="w-5 h-5 text-green-500 mt-1 flex-shrink-0" fill="currentColor" viewBox="0 0 20 20">
                    <path fill-rule="evenodd" d="M10 18a8 8 0 100-16 8 8 0 000 16zm3.707-9.293a1 1 0 00-1.414-1.414L9 10.586 7.707 9.293a1 1 0 00-1.414 1.414l2 2a1 1 0 001.414 0l4-4z" clip-rule="evenodd"/>
                  </svg>
                  <span>Decades of experience</span>
                </li>
                <li class="flex items-start gap-3">
                  <svg class="w-5 h-5 text-green-500 mt-1 flex-shrink-0" fill="currentColor" viewBox="0 0 20 20">
                    <path fill-rule="evenodd" d="M10 18a8 8 0 100-16 8 8 0 000 16zm3.707-9.293a1 1 0 00-1.414-1.414L9 10.586 7.707 9.293a1 1 0 00-1.414 1.414l2 2a1 1 0 001.414 0l4-4z" clip-rule="evenodd"/>
                  </svg>
                  <span>No franchise fees passed to you</span>
                </li>
                <li class="flex items-start gap-3">
                  <svg class="w-5 h-5 text-green-500 mt-1 flex-shrink-0" fill="currentColor" viewBox="0 0 20 20">
                    <path fill-rule="evenodd" d="M10 18a8 8 0 100-16 8 8 0 000 16zm3.707-9.293a1 1 0 00-1.414-1.414L9 10.586 7.707 9.293a1 1 0 00-1.414 1.414l2 2a1 1 0 001.414 0l4-4z" clip-rule="evenodd"/>
                  </svg>
                  <span>Parts & labor warranty included</span>
                </li>
              </ul>
            </div>
          </div>

          <!-- Full-Service Company -->
          <div class="bg-white rounded-2xl shadow-2xl overflow-hidden border-2 border-gray-200">
            <div class="bg-gradient-to-r from-red-600 to-orange-600 text-white p-8 text-center">
              <h4 class="text-2xl font-black mb-2">Full-Service Company</h4>
              <p class="text-red-100 text-sm">Larger operations, higher overhead</p>
            </div>
            <div class="p-8">
              <div class="text-center mb-6">
                <p class="text-5xl md:text-6xl font-black text-red-600 mb-2">
                  $<span id="high-min">0</span> - $<span id="high-max">0</span>
                </p>
                <p class="text-gray-500 text-sm">Typical Range</p>
              </div>
              <ul class="space-y-3 text-gray-700">
                <li class="flex items-start gap-3">
                  <svg class="w-5 h-5 text-green-500 mt-1 flex-shrink-0" fill="currentColor" viewBox="0 0 20 20">
                    <path fill-rule="evenodd" d="M10 18a8 8 0 100-16 8 8 0 000 16zm3.707-9.293a1 1 0 00-1.414-1.414L9 10.586 7.707 9.293a1 1 0 00-1.414 1.414l2 2a1 1 0 001.414 0l4-4z" clip-rule="evenodd"/>
                  </svg>
                  <span>Established brand presence</span>
                </li>
                <li class="flex items-start gap-3">
                  <svg class="w-5 h-5 text-green-500 mt-1 flex-shrink-0" fill="currentColor" viewBox="0 0 20 20">
                    <path fill-rule="evenodd" d="M10 18a8 8 0 100-16 8 8 0 000 16zm3.707-9.293a1 1 0 00-1.414-1.414L9 10.586 7.707 9.293a1 1 0 00-1.414 1.414l2 2a1 1 0 001.414 0l4-4z" clip-rule="evenodd"/>
                  </svg>
                  <span>24/7 call center support</span>
                </li>
                <li class="flex items-start gap-3">
                  <svg class="w-5 h-5 text-green-500 mt-1 flex-shrink-0" fill="currentColor" viewBox="0 0 20 20">
                    <path fill-rule="evenodd" d="M10 18a8 8 0 100-16 8 8 0 000 16zm3.707-9.293a1 1 0 00-1.414-1.414L9 10.586 7.707 9.293a1 1 0 00-1.414 1.414l2 2a1 1 0 001.414 0l4-4z" clip-rule="evenodd"/>
                  </svg>
                  <span>Extended warranty options</span>
                </li>
                <li class="flex items-start gap-3">
                  <svg class="w-5 h-5 text-yellow-500 mt-1 flex-shrink-0" fill="currentColor" viewBox="0 0 20 20">
                    <path fill-rule="evenodd" d="M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-7 4a1 1 0 11-2 0 1 1 0 012 0zm-1-9a1 1 0 00-1 1v4a1 1 0 102 0V6a1 1 0 00-1-1z" clip-rule="evenodd"/>
                  </svg>
                  <span>Higher overhead costs</span>
                </li>
              </ul>
            </div>
          </div>

        </div>

        <!-- Savings Callout -->
        <div class="bg-gradient-to-r from-green-500 to-emerald-600 rounded-2xl p-8 md:p-12 text-white text-center mb-12">
          <p class="text-sm uppercase tracking-wide mb-2 opacity-90">Potential Savings</p>
          <p class="text-4xl md:text-5xl font-black mb-4">
            Save $<span id="savings-min">0</span> - $<span id="savings-max">0</span>
          </p>
          <p class="text-xl text-green-100">
            By choosing an independent licensed tech over a full-service company
          </p>
        </div>

        <!-- Important Notice -->
        <div class="bg-yellow-50 border-l-4 border-yellow-400 rounded-xl p-8 mb-12">
          <div class="flex items-start gap-4">
            <svg class="w-8 h-8 text-yellow-600 flex-shrink-0 mt-1" fill="currentColor" viewBox="0 0 20 20">
              <path fill-rule="evenodd" d="M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-7-4a1 1 0 11-2 0 1 1 0 012 0zM9 9a1 1 0 000 2v3a1 1 0 001 1h1a1 1 0 100-2v-3a1 1 0 00-1-1H9z" clip-rule="evenodd"/>
            </svg>
            <div>
              <h4 class="text-xl font-bold text-gray-900 mb-2">Why Can't We Give an Exact Price?</h4>
              <p class="text-gray-700 leading-relaxed mb-4">
                Every furnace problem is unique. What looks like a simple fix might reveal deeper issues once diagnosed. Or vice versa ‚Äî what sounds scary might be a $150 part replacement.
              </p>
              <p class="text-gray-700 leading-relaxed">
                <strong>That's why we start with a $125 home diagnosis.</strong> Our licensed tech will examine your system, identify the exact problem, and give you transparent pricing for BOTH provider options before any work begins.
              </p>
            </div>
          </div>
        </div>

        <!-- CTA Section - SIMPLIFIED FOR FUNNEL -->
        <div class="bg-gradient-to-br from-red-600 via-red-700 to-orange-600 rounded-2xl p-8 md:p-12 text-white text-center">
          <h3 class="text-3xl md:text-4xl font-black mb-4">
            Ready to Get Your Exact Price?
          </h3>
          <p class="text-xl text-red-100 mb-8 max-w-2xl mx-auto">
            Book your $125 home diagnosis now. We'll identify the exact problem and give you transparent pricing for both provider options.
          </p>

          <div class="max-w-md mx-auto mb-8">
            <a
              href="#booking-form"
              class="block bg-yellow-400 text-gray-900 px-10 py-6 rounded-2xl font-black text-2xl hover:bg-yellow-300 transition-all shadow-2xl hover:scale-105"
            >
              Book My $125 Diagnosis ‚Üí
            </a>

            <p class="text-sm text-red-100 mt-4">
              Or call: <a href="tel:+18334948669" class="underline hover:text-white font-bold">(833) 494-8669</a>
            </p>
          </div>

          <!-- Trust Indicators -->
          <div class="grid grid-cols-3 gap-6 max-w-2xl mx-auto pt-8 border-t border-white/20">
            <div>
              <p class="text-3xl font-black text-yellow-400 mb-1">4.9‚òÖ</p>
              <p class="text-sm text-red-100">1,200+ Reviews</p>
            </div>
            <div>
              <p class="text-3xl font-black text-yellow-400 mb-1">&lt;2 Hr</p>
              <p class="text-sm text-red-100">Avg Response</p>
            </div>
            <div>
              <p class="text-3xl font-black text-yellow-400 mb-1">7,500+</p>
              <p class="text-sm text-red-100">Jobs in 2024</p>
            </div>
          </div>
        </div>

      </div>

    </div>
  </section>

  <!-- BOOKING FORM SECTION - STREAMLINED -->
  <section id="booking-form" class="py-20 px-6 bg-gradient-to-br from-gray-50 via-white to-gray-50">
    <div class="container mx-auto max-w-4xl">

      <!-- Form Header -->
      <div class="text-center mb-12">
        <div class="inline-flex items-center gap-2 bg-green-100 text-green-800 px-6 py-3 rounded-full text-sm font-bold mb-6">
          <svg class="w-5 h-5" fill="currentColor" viewBox="0 0 20 20">
            <path fill-rule="evenodd" d="M10 18a8 8 0 100-16 8 8 0 000 16zm3.707-9.293a1 1 0 00-1.414-1.414L9 10.586 7.707 9.293a1 1 0 00-1.414 1.414l2 2a1 1 0 001.414 0l4-4z" clip-rule="evenodd"/>
          </svg>
          Available Today ‚Ä¢ Same-Day Service
        </div>

        <h2 class="text-4xl md:text-5xl font-black text-gray-900 mb-4">
          Book Your $125 Diagnosis
        </h2>
        <p class="text-xl text-gray-600 max-w-2xl mx-auto">
          Fill out the form below and we'll contact you within minutes to schedule your professional home assessment.
        </p>
      </div>

      <!-- Two Column Layout: Form + Benefits -->
      <div class="grid md:grid-cols-5 gap-8">

        <!-- BOOKING FORM - Takes 3 columns -->
        <div class="md:col-span-3">
          <div class="bg-white rounded-2xl shadow-2xl p-8 border-2 border-gray-100">
            <form id="diagnosis-booking-form" class="space-y-6">

              <!-- Name -->
              <div>
                <label for="name" class="block text-sm font-bold text-gray-900 mb-2">Full Name *</label>
                <input
                  type="text"
                  id="name"
                  name="name"
                  required
                  class="w-full px-4 py-3 border-2 border-gray-200 rounded-xl focus:border-red-500 focus:ring-0 text-gray-900 text-lg"
                  placeholder="John Smith"
                />
              </div>

              <!-- Phone -->
              <div>
                <label for="phone" class="block text-sm font-bold text-gray-900 mb-2">Phone Number *</label>
                <input
                  type="tel"
                  id="phone"
                  name="phone"
                  required
                  class="w-full px-4 py-3 border-2 border-gray-200 rounded-xl focus:border-red-500 focus:ring-0 text-gray-900 text-lg"
                  placeholder="(313) 555-0123"
                />
              </div>

              <!-- Address -->
              <div>
                <label for="address" class="block text-sm font-bold text-gray-900 mb-2">Service Address *</label>
                <input
                  type="text"
                  id="address"
                  name="address"
                  required
                  class="w-full px-4 py-3 border-2 border-gray-200 rounded-xl focus:border-red-500 focus:ring-0 text-gray-900 text-lg"
                  placeholder="123 Main St, Detroit, MI"
                />
              </div>

              <!-- Issue Selection -->
              <div>
                <label for="issue" class="block text-sm font-bold text-gray-900 mb-2">Your Furnace Issue *</label>
                <select
                  id="issue"
                  name="issue"
                  required
                  class="w-full px-4 py-3 border-2 border-gray-200 rounded-xl focus:border-red-500 focus:ring-0 text-gray-900 text-lg"
                >
                  <option value="">Select your issue...</option>
                  <option value="no-heat">No Heat At All</option>
                  <option value="strange-noises">Strange Noises</option>
                  <option value="uneven-heating">Uneven Heating</option>
                  <option value="high-bills">High Energy Bills</option>
                  <option value="cycling">Frequent Cycling</option>
                  <option value="replacement">Full Replacement Needed</option>
                </select>
              </div>

              <!-- Submit Button -->
              <button
                type="submit"
                class="w-full bg-gradient-to-r from-red-600 to-orange-600 text-white px-8 py-5 rounded-2xl font-black text-xl hover:from-red-700 hover:to-orange-700 transition-all shadow-xl hover:scale-[1.02]"
              >
                Schedule My Diagnosis Now ‚Üí
              </button>

              <p class="text-sm text-gray-500 text-center">
                By submitting, you agree to be contacted for scheduling. <a href="/contact" class="underline">Privacy Policy</a>
              </p>

            </form>
          </div>
        </div>

        <!-- BENEFITS SIDEBAR - Takes 2 columns -->
        <div class="md:col-span-2 space-y-6">

          <!-- What Happens Next -->
          <div class="bg-gradient-to-br from-blue-50 to-indigo-50 rounded-2xl p-6 border-2 border-blue-200">
            <h3 class="text-xl font-black text-gray-900 mb-4 flex items-center gap-2">
              <svg class="w-6 h-6 text-blue-600" fill="currentColor" viewBox="0 0 20 20">
                <path fill-rule="evenodd" d="M6 2a1 1 0 00-1 1v1H4a2 2 0 00-2 2v10a2 2 0 002 2h12a2 2 0 002-2V6a2 2 0 00-2-2h-1V3a1 1 0 10-2 0v1H7V3a1 1 0 00-1-1zm0 5a1 1 0 000 2h8a1 1 0 100-2H6z" clip-rule="evenodd"/>
              </svg>
              What Happens Next
            </h3>
            <ol class="space-y-3">
              <li class="flex items-start gap-3">
                <span class="flex-shrink-0 w-7 h-7 bg-blue-600 text-white rounded-full flex items-center justify-center text-sm font-bold">1</span>
                <div>
                  <p class="font-bold text-gray-900">We Call You Back</p>
                  <p class="text-sm text-gray-600">Within minutes to confirm details</p>
                </div>
              </li>
              <li class="flex items-start gap-3">
                <span class="flex-shrink-0 w-7 h-7 bg-blue-600 text-white rounded-full flex items-center justify-center text-sm font-bold">2</span>
                <div>
                  <p class="font-bold text-gray-900">Tech Arrives</p>
                  <p class="text-sm text-gray-600">Same-day or next-day visit</p>
                </div>
              </li>
              <li class="flex items-start gap-3">
                <span class="flex-shrink-0 w-7 h-7 bg-blue-600 text-white rounded-full flex items-center justify-center text-sm font-bold">3</span>
                <div>
                  <p class="font-bold text-gray-900">Get Pricing Options</p>
                  <p class="text-sm text-gray-600">Both provider types, you choose</p>
                </div>
              </li>
            </ol>
          </div>

          <!-- Why Choose Us -->
          <div class="bg-gradient-to-br from-green-50 to-emerald-50 rounded-2xl p-6 border-2 border-green-200">
            <h3 class="text-xl font-black text-gray-900 mb-4 flex items-center gap-2">
              <svg class="w-6 h-6 text-green-600" fill="currentColor" viewBox="0 0 20 20">
                <path fill-rule="evenodd" d="M6.267 3.455a3.066 3.066 0 001.745-.723 3.066 3.066 0 013.976 0 3.066 3.066 0 001.745.723 3.066 3.066 0 012.812 2.812c.051.643.304 1.254.723 1.745a3.066 3.066 0 010 3.976 3.066 3.066 0 00-.723 1.745 3.066 3.066 0 01-2.812 2.812 3.066 3.066 0 00-1.745.723 3.066 3.066 0 01-3.976 0 3.066 3.066 0 00-1.745-.723 3.066 3.066 0 01-2.812-2.812 3.066 3.066 0 00-.723-1.745 3.066 3.066 0 010-3.976 3.066 3.066 0 00.723-1.745 3.066 3.066 0 012.812-2.812zm7.44 5.252a1 1 0 00-1.414-1.414L9 10.586 7.707 9.293a1 1 0 00-1.414 1.414l2 2a1 1 0 001.414 0l4-4z" clip-rule="evenodd"/>
              </svg>
              Why Book With Us
            </h3>
            <ul class="space-y-2 text-sm text-gray-700">
              <li class="flex items-center gap-2">
                <svg class="w-5 h-5 text-green-600 flex-shrink-0" fill="currentColor" viewBox="0 0 20 20">
                  <path fill-rule="evenodd" d="M16.707 5.293a1 1 0 010 1.414l-8 8a1 1 0 01-1.414 0l-4-4a1 1 0 011.414-1.414L8 12.586l7.293-7.293a1 1 0 011.414 0z" clip-rule="evenodd"/>
                </svg>
                Licensed & insured technicians
              </li>
              <li class="flex items-center gap-2">
                <svg class="w-5 h-5 text-green-600 flex-shrink-0" fill="currentColor" viewBox="0 0 20 20">
                  <path fill-rule="evenodd" d="M16.707 5.293a1 1 0 010 1.414l-8 8a1 1 0 01-1.414 0l-4-4a1 1 0 011.414-1.414L8 12.586l7.293-7.293a1 1 0 011.414 0z" clip-rule="evenodd"/>
                </svg>
                Transparent pricing, no hidden fees
              </li>
              <li class="flex items-center gap-2">
                <svg class="w-5 h-5 text-green-600 flex-shrink-0" fill="currentColor" viewBox="0 0 20 20">
                  <path fill-rule="evenodd" d="M16.707 5.293a1 1 0 010 1.414l-8 8a1 1 0 01-1.414 0l-4-4a1 1 0 011.414-1.414L8 12.586l7.293-7.293a1 1 0 011.414 0z" clip-rule="evenodd"/>
                </svg>
                Two provider options to choose from
              </li>
              <li class="flex items-center gap-2">
                <svg class="w-5 h-5 text-green-600 flex-shrink-0" fill="currentColor" viewBox="0 0 20 20">
                  <path fill-rule="evenodd" d="M16.707 5.293a1 1 0 010 1.414l-8 8a1 1 0 01-1.414 0l-4-4a1 1 0 011.414-1.414L8 12.586l7.293-7.293a1 1 0 011.414 0z" clip-rule="evenodd"/>
                </svg>
                4.9‚òÖ rating from 1,200+ customers
              </li>
            </ul>
          </div>

        </div>

      </div>

    </div>
  </section>

  <!-- Sticky Mobile CTA -->
  <div class="md:hidden fixed bottom-0 left-0 right-0 bg-gradient-to-r from-red-600 to-orange-600 p-4 shadow-2xl z-50 border-t-4 border-yellow-400">
    <a href="#booking-form" class="block bg-yellow-400 text-gray-900 text-center py-4 rounded-xl font-black text-lg hover:bg-yellow-300 transition-colors shadow-xl">
      Book My $125 Diagnosis
    </a>
  </div>

</Layout>

<script>
  // Interactive Cost Calculator
  const issueCards = document.querySelectorAll('.issue-card');
  const resultsContainer = document.getElementById('results-container');
  const selectedIssueTitle = document.getElementById('selected-issue-title');
  const lowMinSpan = document.getElementById('low-min');
  const lowMaxSpan = document.getElementById('low-max');
  const highMinSpan = document.getElementById('high-min');
  const highMaxSpan = document.getElementById('high-max');
  const savingsMinSpan = document.getElementById('savings-min');
  const savingsMaxSpan = document.getElementById('savings-max');
  const issueSelectDropdown = document.getElementById('issue');

  const issueLabels = {
    'no-heat': 'No Heat At All',
    'strange-noises': 'Strange Noises',
    'uneven-heating': 'Uneven Heating',
    'high-bills': 'High Energy Bills',
    'cycling': 'Frequent Cycling',
    'replacement': 'Full Furnace Replacement'
  };

  let selectedIssue = '';

  issueCards.forEach(card => {
    card.addEventListener('click', () => {
      // Get data from card
      const issue = card.dataset.issue;
      selectedIssue = issue;
      const lowMin = parseInt(card.dataset.lowMin);
      const lowMax = parseInt(card.dataset.lowMax);
      const highMin = parseInt(card.dataset.highMin);
      const highMax = parseInt(card.dataset.highMax);

      // Calculate savings
      const savingsMin = highMin - lowMax; // Conservative estimate
      const savingsMax = highMax - lowMin; // Optimistic estimate

      // Update UI
      selectedIssueTitle.textContent = issueLabels[issue];
      lowMinSpan.textContent = lowMin.toLocaleString();
      lowMaxSpan.textContent = lowMax.toLocaleString();
      highMinSpan.textContent = highMin.toLocaleString();
      highMaxSpan.textContent = highMax.toLocaleString();
      savingsMinSpan.textContent = savingsMin.toLocaleString();
      savingsMaxSpan.textContent = savingsMax.toLocaleString();

      // Pre-select the issue in the booking form
      if (issueSelectDropdown) {
        issueSelectDropdown.value = issue;
      }

      // Show results with smooth scroll
      resultsContainer.classList.remove('hidden');

      setTimeout(() => {
        resultsContainer.scrollIntoView({
          behavior: 'smooth',
          block: 'start'
        });
      }, 100);

      // Visual feedback on selected card
      issueCards.forEach(c => c.classList.remove('ring-4', 'ring-red-500'));
      card.classList.add('ring-4', 'ring-red-500');
    });
  });

  // Form Submission Handler
  const bookingForm = document.getElementById('diagnosis-booking-form');
  if (bookingForm) {
    bookingForm.addEventListener('submit', async (e) => {
      e.preventDefault();

      const submitButton = bookingForm.querySelector('button[type="submit"]');
      const originalButtonText = submitButton.textContent;
      submitButton.disabled = true;
      submitButton.textContent = 'Submitting...';

      try {
        const formData = {
          name: bookingForm.querySelector('#name').value,
          phone: bookingForm.querySelector('#phone').value,
          address: bookingForm.querySelector('#address').value,
          issue: bookingForm.querySelector('#issue').value,
          formSource: 'cost_estimator_landing'
        };

        const response = await fetch('/api/submit-form', {
          method: 'POST',
          headers: {
            'Content-Type': 'application/json',
          },
          body: JSON.stringify({ formData, formSource: 'cost_estimator_landing' })
        });

        const result = await response.json();

        if (result.success) {
          // Show success message
          bookingForm.innerHTML = `
            <div class="text-center py-12">
              <div class="w-20 h-20 bg-green-100 rounded-full flex items-center justify-center mx-auto mb-6">
                <svg class="w-10 h-10 text-green-600" fill="currentColor" viewBox="0 0 20 20">
                  <path fill-rule="evenodd" d="M10 18a8 8 0 100-16 8 8 0 000 16zm3.707-9.293a1 1 0 00-1.414-1.414L9 10.586 7.707 9.293a1 1 0 00-1.414 1.414l2 2a1 1 0 001.414 0l4-4z" clip-rule="evenodd"/>
                </svg>
              </div>
              <h3 class="text-3xl font-black text-gray-900 mb-3">Request Submitted!</h3>
              <p class="text-lg text-gray-600 mb-6">
                We'll call you within minutes to schedule your $125 diagnosis.
              </p>
              <p class="text-sm text-gray-500">
                Check your phone for a call from <strong>(833) 494-8669</strong>
              </p>
            </div>
          `;
        } else {
          throw new Error(result.error || 'Submission failed');
        }

      } catch (error) {
        console.error('Form submission error:', error);
        alert('There was an error submitting your request. Please call us at (833) 494-8669.');
        submitButton.disabled = false;
        submitButton.textContent = originalButtonText;
      }
    });
  }

  // Smooth scroll for anchor links
  document.querySelectorAll('a[href^="#"]').forEach(anchor => {
    anchor.addEventListener('click', function (e) {
      e.preventDefault();
      const targetId = this.getAttribute('href').substring(1);
      const target = document.getElementById(targetId);
      if (target) {
        target.scrollIntoView({
          behavior: 'smooth',
          block: 'start'
        });
      }
    });
  });
</script>

<style>
  @keyframes blob {
    0%, 100% {
      transform: translate(0px, 0px) scale(1);
    }
    33% {
      transform: translate(30px, -50px) scale(1.1);
    }
    66% {
      transform: translate(-20px, 20px) scale(0.9);
    }
  }

  .animate-blob {
    animation: blob 7s infinite;
  }

  /* Add bottom padding to body on mobile to account for sticky CTA */
  @media (max-width: 768px) {
    body {
      padding-bottom: 80px;
    }
  }
</style>
