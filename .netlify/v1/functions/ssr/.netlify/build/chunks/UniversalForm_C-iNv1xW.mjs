import { c as createAstro, d as createComponent, r as renderTemplate, k as defineScriptVars, f as addAttribute, i as renderComponent, l as Fragment, m as maybeRenderHead } from './astro/server_Biyn9gVN.mjs';

var __freeze = Object.freeze;
var __defProp = Object.defineProperty;
var __template = (cooked, raw) => __freeze(__defProp(cooked, "raw", { value: __freeze(raw || cooked.slice()) }));
var _a;
const $$Astro = createAstro("https://fixmyfurnacedetroit.com");
const $$UniversalForm = createComponent(async ($$result, $$props, $$slots) => {
  const Astro2 = $$result.createAstro($$Astro, $$props, $$slots);
  Astro2.self = $$UniversalForm;
  const {
    formId,
    formSource,
    apiEndpoint = "/api/submit-form",
    title,
    description,
    fields,
    submitText = "Submit",
    className = ""
  } = Astro2.props;
  const MAPBOX_TOKEN = "pk.eyJ1IjoidGFrZS1kZXRyb2l0LXRlY2giLCJhIjoiY21oYms0ODh4MGZpZDJqb2FmcjVkcW1taSJ9.CIimHYrJ3F2r1bJNgREdGA";
  return renderTemplate(_a || (_a = __template(["", "<div", "> ", " ", " <!-- Success/Error Message Container --> <div", ' class="mb-6 hidden"> <div', ` class="bg-green-50 border border-green-200 rounded-lg p-4 mb-4 hidden"> <div class="flex items-center"> <svg class="w-5 h-5 text-green-600 mr-3" fill="currentColor" viewBox="0 0 20 20"> <path fill-rule="evenodd" d="M10 18a8 8 0 100-16 8 8 0 000 16zm3.707-9.293a1 1 0 00-1.414-1.414L9 10.586 7.707 9.293a1 1 0 00-1.414 1.414l2 2a1 1 0 001.414 0l4-4z" clip-rule="evenodd"></path> </svg> <p class="text-green-800 font-semibold">Form submitted successfully! We'll contact you soon.</p> </div> </div> <div`, ' class="bg-red-50 border border-red-200 rounded-lg p-4 mb-4 hidden"> <div class="flex items-center"> <svg class="w-5 h-5 text-red-600 mr-3" fill="currentColor" viewBox="0 0 20 20"> <path fill-rule="evenodd" d="M10 18a8 8 0 100-16 8 8 0 000 16zM8.707 7.293a1 1 0 00-1.414 1.414L8.586 10l-1.293 1.293a1 1 0 101.414 1.414L10 11.414l1.293 1.293a1 1 0 001.414-1.414L11.414 10l1.293-1.293a1 1 0 00-1.414-1.414L10 8.586 8.707 7.293z" clip-rule="evenodd"></path> </svg> <p class="text-red-800 font-semibold">Something went wrong. Please try again.</p> </div> </div> <div', ' class="bg-blue-50 border border-blue-200 rounded-lg p-4 mb-4 hidden"> <div class="flex items-center"> <svg class="animate-spin w-5 h-5 text-blue-600 mr-3" fill="none" viewBox="0 0 24 24"> <circle class="opacity-25" cx="12" cy="12" r="10" stroke="currentColor" stroke-width="4"></circle> <path class="opacity-75" fill="currentColor" d="M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"></path> </svg> <p class="text-blue-800 font-semibold">Submitting your form...</p> </div> </div> </div> <form class="space-y-4"', `> <!-- Hidden honeypot field for spam protection --> <div style="display: none;"> <label>Don't fill this out if you're human: <input name="bot-field"></label> </div> `, ' <!-- Submit Button --> <button type="submit"', ' class="w-full bg-red-600 text-white font-bold py-3 rounded-lg shadow-md hover:bg-red-700 active:scale-[0.98] transition disabled:opacity-50 disabled:cursor-not-allowed"> <span', ">", "</span> <span", ' class="hidden"> <svg class="animate-spin inline w-5 h-5 mr-2" fill="none" viewBox="0 0 24 24"> <circle class="opacity-25" cx="12" cy="12" r="10" stroke="currentColor" stroke-width="4"></circle> <path class="opacity-75" fill="currentColor" d="M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"></path> </svg>\nSubmitting...\n</span> </button> </form> </div> <!-- Note: Address autocomplete uses Mapbox Geocoding API only, no map display needed --> <!-- Initialize the form with inline script --> <script>(function(){', "\n  // Universal Form Handler - Inline Implementation\n  document.addEventListener(\"DOMContentLoaded\", () => {\n    const config = {\n      formId: formId,\n      formSource: formSource,\n      fields: fields,\n      MAPBOX_TOKEN: MAPBOX_TOKEN\n    };\n\n    // Phone number formatting and validation\n    function formatPhoneNumber(value) {\n      const phone = value.replace(/\\D/g, '');\n      if (phone.length < 4) return phone;\n      if (phone.length < 7) return `(${phone.slice(0,3)}) ${phone.slice(3)}`;\n      return `(${phone.slice(0,3)}) ${phone.slice(3,6)}-${phone.slice(6,10)}`;\n    }\n\n    function validatePhoneNumber(phone) {\n      const digits = phone.replace(/\\D/g, '');\n      return digits.length === 10;\n    }\n\n    function showFieldError(fieldName, show) {\n      const field = document.getElementById(`${formId}-${fieldName}`);\n      const error = document.getElementById(`${formId}-${fieldName}-error`);\n      if (field && error) {\n        if (show) {\n          field.classList.add('border-red-500');\n          error.classList.remove('hidden');\n        } else {\n          field.classList.remove('border-red-500');\n          error.classList.add('hidden');\n        }\n      }\n    }\n\n    // Setup phone fields\n    fields.forEach(field => {\n      if (field.type === 'tel') {\n        const phoneInput = document.getElementById(`${formId}-${field.name}`);\n        if (phoneInput) {\n          phoneInput.addEventListener('input', (e) => {\n            const formatted = formatPhoneNumber(e.target.value);\n            e.target.value = formatted;\n\n            if (formatted.length > 0) {\n              const isValid = validatePhoneNumber(formatted);\n              showFieldError(field.name, !isValid);\n            } else {\n              showFieldError(field.name, false);\n            }\n          });\n\n          phoneInput.addEventListener('keydown', (e) => {\n            // Allow backspace, delete, tab, escape, enter\n            if ([8, 9, 27, 13, 46].includes(e.keyCode) ||\n                // Allow Ctrl+A, Ctrl+C, Ctrl+V, Ctrl+X\n                (e.keyCode === 65 && e.ctrlKey) ||\n                (e.keyCode === 67 && e.ctrlKey) ||\n                (e.keyCode === 86 && e.ctrlKey) ||\n                (e.keyCode === 88 && e.ctrlKey)) {\n              return;\n            }\n            // Only allow numbers\n            if ((e.keyCode < 48 || e.keyCode > 57) && (e.keyCode < 96 || e.keyCode > 105)) {\n              e.preventDefault();\n            }\n          });\n        }\n      }\n    });\n\n    // Setup address autocomplete with Mapbox\n    fields.forEach(field => {\n      if (field.type === 'address' && MAPBOX_TOKEN) {\n        const addressInput = document.getElementById(`${formId}-${field.name}`);\n        const suggestions = document.getElementById(`${formId}-${field.name}-suggestions`);\n\n        if (addressInput && suggestions) {\n          let debounceTimer;\n\n          function searchAddresses(query) {\n            if (query.length < 3) {\n              suggestions.classList.add('hidden');\n              return;\n            }\n\n            clearTimeout(debounceTimer);\n            debounceTimer = setTimeout(async () => {\n              try {\n                const response = await fetch(\n                  `https://api.mapbox.com/geocoding/v5/mapbox.places/${encodeURIComponent(query)}.json?` +\n                  `access_token=${MAPBOX_TOKEN}&` +\n                  `country=US&` +\n                  `types=address&` +\n                  `limit=5&` +\n                  `bbox=-90.418,41.696,-82.413,48.2`\n                );\n\n                const data = await response.json();\n                displaySuggestions(data.features);\n              } catch (error) {\n                console.error('Error fetching addresses:', error);\n              }\n            }, 300);\n          }\n\n          function displaySuggestions(addresses) {\n            suggestions.innerHTML = '';\n\n            if (addresses.length === 0) {\n              suggestions.classList.add('hidden');\n              return;\n            }\n\n            addresses.forEach((address) => {\n              const div = document.createElement('div');\n              div.className = 'px-3 py-2 hover:bg-gray-100 cursor-pointer text-sm border-b border-gray-100 last:border-b-0';\n              div.textContent = address.place_name;\n              div.addEventListener('click', () => {\n                addressInput.value = address.place_name;\n                suggestions.classList.add('hidden');\n              });\n              suggestions.appendChild(div);\n            });\n\n            suggestions.classList.remove('hidden');\n          }\n\n          addressInput.addEventListener('input', (e) => {\n            searchAddresses(e.target.value);\n          });\n\n          addressInput.addEventListener('blur', () => {\n            setTimeout(() => {\n              suggestions.classList.add('hidden');\n            }, 150);\n          });\n        }\n      }\n    });\n\n    // Get form elements\n    const form = document.getElementById(formId);\n    const submitBtn = document.getElementById(`${formId}-submit`);\n    const submitText = document.getElementById(`${formId}-submit-text`);\n    const submitLoading = document.getElementById(`${formId}-submit-loading`);\n    const messages = document.getElementById(`${formId}-messages`);\n    const successMessage = document.getElementById(`${formId}-success`);\n    const errorMessage = document.getElementById(`${formId}-error`);\n    const loadingMessage = document.getElementById(`${formId}-loading`);\n\n    if (!form) {\n      console.error(`Form with ID \"${formId}\" not found`);\n      return;\n    }\n\n    // Message handling\n    function showMessage(type) {\n      successMessage.classList.add('hidden');\n      errorMessage.classList.add('hidden');\n      loadingMessage.classList.add('hidden');\n\n      messages.classList.remove('hidden');\n      document.getElementById(`${formId}-${type}`).classList.remove('hidden');\n\n      messages.scrollIntoView({ behavior: 'smooth', block: 'nearest' });\n    }\n\n    function hideMessages() {\n      messages.classList.add('hidden');\n      successMessage.classList.add('hidden');\n      errorMessage.classList.add('hidden');\n      loadingMessage.classList.add('hidden');\n    }\n\n    function setLoadingState(loading) {\n      submitBtn.disabled = loading;\n      if (loading) {\n        submitText.classList.add('hidden');\n        submitLoading.classList.remove('hidden');\n        showMessage('loading');\n      } else {\n        submitText.classList.remove('hidden');\n        submitLoading.classList.add('hidden');\n      }\n    }\n\n    // Update error message text dynamically\n    function showError(message) {\n      const errorText = errorMessage.querySelector('p');\n      if (errorText) {\n        errorText.textContent = message;\n      }\n      showMessage('error');\n    }\n\n    // Form submission\n    form.addEventListener('submit', async function(e) {\n      e.preventDefault();\n\n      setLoadingState(true);\n\n      try {\n        const formData = new FormData(form);\n        const data = {};\n\n        // Collect form data\n        fields.forEach(field => {\n          const value = formData.get(field.name)?.trim();\n          if (value) {\n            data[field.name] = value;\n          }\n        });\n\n\n        // Basic validation\n        const requiredFields = fields.filter(f => f.required);\n        for (const field of requiredFields) {\n          if (!data[field.name]) {\n            throw new Error(`${field.label} is required`);\n          }\n        }\n\n        // Validate phone numbers\n        for (const field of fields) {\n          if (field.type === 'tel' && data[field.name]) {\n            if (!validatePhoneNumber(data[field.name])) {\n              throw new Error('Please enter a valid phone number');\n            }\n          }\n        }\n\n        // Submit to API\n        const response = await fetch(apiEndpoint, {\n          method: 'POST',\n          headers: {\n            'Content-Type': 'application/json',\n          },\n          body: JSON.stringify({\n            formData: data,\n            formSource: formSource\n          })\n        });\n\n        if (!response.ok) {\n          const errorData = await response.json();\n\n          // Handle CSRF errors specifically\n          if (response.status === 403) {\n            throw new Error('Security validation failed. Please refresh the page and try again.');\n          }\n\n          throw new Error(errorData.error || 'Failed to submit form');\n        }\n\n        const result = await response.json();\n        if (!result.success) {\n          throw new Error(result.error || 'Failed to submit form');\n        }\n\n        // Success\n        setLoadingState(false);\n        showMessage('success');\n        form.reset();\n\n        // Hide success message after 5 seconds\n        setTimeout(() => hideMessages(), 5000);\n\n      } catch (error) {\n        console.error('Submission error:', error);\n        setLoadingState(false);\n        showError(error.message || 'Something went wrong. Please try again.');\n\n        // Hide error message after 7 seconds\n        setTimeout(() => hideMessages(), 7000);\n      }\n    });\n  });\n})();</script>"], ["", "<div", "> ", " ", " <!-- Success/Error Message Container --> <div", ' class="mb-6 hidden"> <div', ` class="bg-green-50 border border-green-200 rounded-lg p-4 mb-4 hidden"> <div class="flex items-center"> <svg class="w-5 h-5 text-green-600 mr-3" fill="currentColor" viewBox="0 0 20 20"> <path fill-rule="evenodd" d="M10 18a8 8 0 100-16 8 8 0 000 16zm3.707-9.293a1 1 0 00-1.414-1.414L9 10.586 7.707 9.293a1 1 0 00-1.414 1.414l2 2a1 1 0 001.414 0l4-4z" clip-rule="evenodd"></path> </svg> <p class="text-green-800 font-semibold">Form submitted successfully! We'll contact you soon.</p> </div> </div> <div`, ' class="bg-red-50 border border-red-200 rounded-lg p-4 mb-4 hidden"> <div class="flex items-center"> <svg class="w-5 h-5 text-red-600 mr-3" fill="currentColor" viewBox="0 0 20 20"> <path fill-rule="evenodd" d="M10 18a8 8 0 100-16 8 8 0 000 16zM8.707 7.293a1 1 0 00-1.414 1.414L8.586 10l-1.293 1.293a1 1 0 101.414 1.414L10 11.414l1.293 1.293a1 1 0 001.414-1.414L11.414 10l1.293-1.293a1 1 0 00-1.414-1.414L10 8.586 8.707 7.293z" clip-rule="evenodd"></path> </svg> <p class="text-red-800 font-semibold">Something went wrong. Please try again.</p> </div> </div> <div', ' class="bg-blue-50 border border-blue-200 rounded-lg p-4 mb-4 hidden"> <div class="flex items-center"> <svg class="animate-spin w-5 h-5 text-blue-600 mr-3" fill="none" viewBox="0 0 24 24"> <circle class="opacity-25" cx="12" cy="12" r="10" stroke="currentColor" stroke-width="4"></circle> <path class="opacity-75" fill="currentColor" d="M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"></path> </svg> <p class="text-blue-800 font-semibold">Submitting your form...</p> </div> </div> </div> <form class="space-y-4"', `> <!-- Hidden honeypot field for spam protection --> <div style="display: none;"> <label>Don't fill this out if you're human: <input name="bot-field"></label> </div> `, ' <!-- Submit Button --> <button type="submit"', ' class="w-full bg-red-600 text-white font-bold py-3 rounded-lg shadow-md hover:bg-red-700 active:scale-[0.98] transition disabled:opacity-50 disabled:cursor-not-allowed"> <span', ">", "</span> <span", ' class="hidden"> <svg class="animate-spin inline w-5 h-5 mr-2" fill="none" viewBox="0 0 24 24"> <circle class="opacity-25" cx="12" cy="12" r="10" stroke="currentColor" stroke-width="4"></circle> <path class="opacity-75" fill="currentColor" d="M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"></path> </svg>\nSubmitting...\n</span> </button> </form> </div> <!-- Note: Address autocomplete uses Mapbox Geocoding API only, no map display needed --> <!-- Initialize the form with inline script --> <script>(function(){', "\n  // Universal Form Handler - Inline Implementation\n  document.addEventListener(\"DOMContentLoaded\", () => {\n    const config = {\n      formId: formId,\n      formSource: formSource,\n      fields: fields,\n      MAPBOX_TOKEN: MAPBOX_TOKEN\n    };\n\n    // Phone number formatting and validation\n    function formatPhoneNumber(value) {\n      const phone = value.replace(/\\\\D/g, '');\n      if (phone.length < 4) return phone;\n      if (phone.length < 7) return \\`(\\${phone.slice(0,3)}) \\${phone.slice(3)}\\`;\n      return \\`(\\${phone.slice(0,3)}) \\${phone.slice(3,6)}-\\${phone.slice(6,10)}\\`;\n    }\n\n    function validatePhoneNumber(phone) {\n      const digits = phone.replace(/\\\\D/g, '');\n      return digits.length === 10;\n    }\n\n    function showFieldError(fieldName, show) {\n      const field = document.getElementById(\\`\\${formId}-\\${fieldName}\\`);\n      const error = document.getElementById(\\`\\${formId}-\\${fieldName}-error\\`);\n      if (field && error) {\n        if (show) {\n          field.classList.add('border-red-500');\n          error.classList.remove('hidden');\n        } else {\n          field.classList.remove('border-red-500');\n          error.classList.add('hidden');\n        }\n      }\n    }\n\n    // Setup phone fields\n    fields.forEach(field => {\n      if (field.type === 'tel') {\n        const phoneInput = document.getElementById(\\`\\${formId}-\\${field.name}\\`);\n        if (phoneInput) {\n          phoneInput.addEventListener('input', (e) => {\n            const formatted = formatPhoneNumber(e.target.value);\n            e.target.value = formatted;\n\n            if (formatted.length > 0) {\n              const isValid = validatePhoneNumber(formatted);\n              showFieldError(field.name, !isValid);\n            } else {\n              showFieldError(field.name, false);\n            }\n          });\n\n          phoneInput.addEventListener('keydown', (e) => {\n            // Allow backspace, delete, tab, escape, enter\n            if ([8, 9, 27, 13, 46].includes(e.keyCode) ||\n                // Allow Ctrl+A, Ctrl+C, Ctrl+V, Ctrl+X\n                (e.keyCode === 65 && e.ctrlKey) ||\n                (e.keyCode === 67 && e.ctrlKey) ||\n                (e.keyCode === 86 && e.ctrlKey) ||\n                (e.keyCode === 88 && e.ctrlKey)) {\n              return;\n            }\n            // Only allow numbers\n            if ((e.keyCode < 48 || e.keyCode > 57) && (e.keyCode < 96 || e.keyCode > 105)) {\n              e.preventDefault();\n            }\n          });\n        }\n      }\n    });\n\n    // Setup address autocomplete with Mapbox\n    fields.forEach(field => {\n      if (field.type === 'address' && MAPBOX_TOKEN) {\n        const addressInput = document.getElementById(\\`\\${formId}-\\${field.name}\\`);\n        const suggestions = document.getElementById(\\`\\${formId}-\\${field.name}-suggestions\\`);\n\n        if (addressInput && suggestions) {\n          let debounceTimer;\n\n          function searchAddresses(query) {\n            if (query.length < 3) {\n              suggestions.classList.add('hidden');\n              return;\n            }\n\n            clearTimeout(debounceTimer);\n            debounceTimer = setTimeout(async () => {\n              try {\n                const response = await fetch(\n                  \\`https://api.mapbox.com/geocoding/v5/mapbox.places/\\${encodeURIComponent(query)}.json?\\` +\n                  \\`access_token=\\${MAPBOX_TOKEN}&\\` +\n                  \\`country=US&\\` +\n                  \\`types=address&\\` +\n                  \\`limit=5&\\` +\n                  \\`bbox=-90.418,41.696,-82.413,48.2\\`\n                );\n\n                const data = await response.json();\n                displaySuggestions(data.features);\n              } catch (error) {\n                console.error('Error fetching addresses:', error);\n              }\n            }, 300);\n          }\n\n          function displaySuggestions(addresses) {\n            suggestions.innerHTML = '';\n\n            if (addresses.length === 0) {\n              suggestions.classList.add('hidden');\n              return;\n            }\n\n            addresses.forEach((address) => {\n              const div = document.createElement('div');\n              div.className = 'px-3 py-2 hover:bg-gray-100 cursor-pointer text-sm border-b border-gray-100 last:border-b-0';\n              div.textContent = address.place_name;\n              div.addEventListener('click', () => {\n                addressInput.value = address.place_name;\n                suggestions.classList.add('hidden');\n              });\n              suggestions.appendChild(div);\n            });\n\n            suggestions.classList.remove('hidden');\n          }\n\n          addressInput.addEventListener('input', (e) => {\n            searchAddresses(e.target.value);\n          });\n\n          addressInput.addEventListener('blur', () => {\n            setTimeout(() => {\n              suggestions.classList.add('hidden');\n            }, 150);\n          });\n        }\n      }\n    });\n\n    // Get form elements\n    const form = document.getElementById(formId);\n    const submitBtn = document.getElementById(\\`\\${formId}-submit\\`);\n    const submitText = document.getElementById(\\`\\${formId}-submit-text\\`);\n    const submitLoading = document.getElementById(\\`\\${formId}-submit-loading\\`);\n    const messages = document.getElementById(\\`\\${formId}-messages\\`);\n    const successMessage = document.getElementById(\\`\\${formId}-success\\`);\n    const errorMessage = document.getElementById(\\`\\${formId}-error\\`);\n    const loadingMessage = document.getElementById(\\`\\${formId}-loading\\`);\n\n    if (!form) {\n      console.error(\\`Form with ID \"\\${formId}\" not found\\`);\n      return;\n    }\n\n    // Message handling\n    function showMessage(type) {\n      successMessage.classList.add('hidden');\n      errorMessage.classList.add('hidden');\n      loadingMessage.classList.add('hidden');\n\n      messages.classList.remove('hidden');\n      document.getElementById(\\`\\${formId}-\\${type}\\`).classList.remove('hidden');\n\n      messages.scrollIntoView({ behavior: 'smooth', block: 'nearest' });\n    }\n\n    function hideMessages() {\n      messages.classList.add('hidden');\n      successMessage.classList.add('hidden');\n      errorMessage.classList.add('hidden');\n      loadingMessage.classList.add('hidden');\n    }\n\n    function setLoadingState(loading) {\n      submitBtn.disabled = loading;\n      if (loading) {\n        submitText.classList.add('hidden');\n        submitLoading.classList.remove('hidden');\n        showMessage('loading');\n      } else {\n        submitText.classList.remove('hidden');\n        submitLoading.classList.add('hidden');\n      }\n    }\n\n    // Update error message text dynamically\n    function showError(message) {\n      const errorText = errorMessage.querySelector('p');\n      if (errorText) {\n        errorText.textContent = message;\n      }\n      showMessage('error');\n    }\n\n    // Form submission\n    form.addEventListener('submit', async function(e) {\n      e.preventDefault();\n\n      setLoadingState(true);\n\n      try {\n        const formData = new FormData(form);\n        const data = {};\n\n        // Collect form data\n        fields.forEach(field => {\n          const value = formData.get(field.name)?.trim();\n          if (value) {\n            data[field.name] = value;\n          }\n        });\n\n\n        // Basic validation\n        const requiredFields = fields.filter(f => f.required);\n        for (const field of requiredFields) {\n          if (!data[field.name]) {\n            throw new Error(\\`\\${field.label} is required\\`);\n          }\n        }\n\n        // Validate phone numbers\n        for (const field of fields) {\n          if (field.type === 'tel' && data[field.name]) {\n            if (!validatePhoneNumber(data[field.name])) {\n              throw new Error('Please enter a valid phone number');\n            }\n          }\n        }\n\n        // Submit to API\n        const response = await fetch(apiEndpoint, {\n          method: 'POST',\n          headers: {\n            'Content-Type': 'application/json',\n          },\n          body: JSON.stringify({\n            formData: data,\n            formSource: formSource\n          })\n        });\n\n        if (!response.ok) {\n          const errorData = await response.json();\n\n          // Handle CSRF errors specifically\n          if (response.status === 403) {\n            throw new Error('Security validation failed. Please refresh the page and try again.');\n          }\n\n          throw new Error(errorData.error || 'Failed to submit form');\n        }\n\n        const result = await response.json();\n        if (!result.success) {\n          throw new Error(result.error || 'Failed to submit form');\n        }\n\n        // Success\n        setLoadingState(false);\n        showMessage('success');\n        form.reset();\n\n        // Hide success message after 5 seconds\n        setTimeout(() => hideMessages(), 5000);\n\n      } catch (error) {\n        console.error('Submission error:', error);\n        setLoadingState(false);\n        showError(error.message || 'Something went wrong. Please try again.');\n\n        // Hide error message after 7 seconds\n        setTimeout(() => hideMessages(), 7000);\n      }\n    });\n  });\n})();</script>"])), maybeRenderHead(), addAttribute(`universal-form ${className}`, "class"), title && renderTemplate`<h3 class="text-3xl font-bold text-gray-900 mb-4"> ${title} </h3>`, description && renderTemplate`<p class="text-gray-600 mb-6 text-sm md:text-base"> ${description} </p>`, addAttribute(`${formId}-messages`, "id"), addAttribute(`${formId}-success`, "id"), addAttribute(`${formId}-error`, "id"), addAttribute(`${formId}-loading`, "id"), addAttribute(formId, "id"), fields.map((field) => renderTemplate`<div> <label${addAttribute(`${formId}-${field.name}`, "for")} class="block text-sm font-semibold text-gray-800"> ${field.label} ${field.required && renderTemplate`<span class="text-red-500 ml-1">*</span>`} </label> ${field.type === "text" && renderTemplate`<input${addAttribute(`${formId}-${field.name}`, "id")}${addAttribute(field.name, "name")} type="text"${addAttribute(field.placeholder, "placeholder")} class="mt-1 w-full border border-gray-300 rounded-lg px-4 py-3 text-gray-800 focus:ring-2 focus:ring-red-600 focus:border-transparent outline-none transition"${addAttribute(field.required, "required")}${addAttribute(field.autoComplete, "autocomplete")}>`} ${field.type === "tel" && renderTemplate`${renderComponent($$result, "Fragment", Fragment, {}, { "default": async ($$result2) => renderTemplate` <input${addAttribute(`${formId}-${field.name}`, "id")}${addAttribute(field.name, "name")} type="tel"${addAttribute(field.placeholder || "(313) 555-1234", "placeholder")} maxlength="14" class="mt-1 w-full border border-gray-300 rounded-lg px-4 py-3 text-gray-800 focus:ring-2 focus:ring-red-600 focus:border-transparent outline-none transition"${addAttribute(field.required, "required")}${addAttribute(field.autoComplete || "tel", "autocomplete")}> <div${addAttribute(`${formId}-${field.name}-error`, "id")} class="text-red-600 text-sm mt-1 hidden">Please enter a valid phone number</div> ` })}`} ${field.type === "email" && renderTemplate`<input${addAttribute(`${formId}-${field.name}`, "id")}${addAttribute(field.name, "name")} type="email"${addAttribute(field.placeholder, "placeholder")} class="mt-1 w-full border border-gray-300 rounded-lg px-4 py-3 text-gray-800 focus:ring-2 focus:ring-red-600 focus:border-transparent outline-none transition"${addAttribute(field.required, "required")}${addAttribute(field.autoComplete || "email", "autocomplete")}>`} ${field.type === "textarea" && renderTemplate`<textarea${addAttribute(`${formId}-${field.name}`, "id")}${addAttribute(field.name, "name")}${addAttribute(field.placeholder, "placeholder")} rows="4" class="mt-1 w-full border border-gray-300 rounded-lg px-4 py-3 text-gray-800 focus:ring-2 focus:ring-red-600 focus:border-transparent outline-none transition resize-vertical"${addAttribute(field.required, "required")}></textarea>`} ${field.type === "select" && renderTemplate`<select${addAttribute(`${formId}-${field.name}`, "id")}${addAttribute(field.name, "name")} class="mt-1 w-full border border-gray-300 rounded-lg px-4 py-3 text-gray-800 focus:ring-2 focus:ring-red-600 focus:border-transparent outline-none transition"${addAttribute(field.required, "required")}> <option value="">Select an option...</option> ${field.options?.map((option) => renderTemplate`<option${addAttribute(option.toLowerCase().replace(/\s+/g, "-"), "value")}>${option}</option>`)} </select>`} ${field.type === "address" && renderTemplate`<div class="relative"> <input${addAttribute(`${formId}-${field.name}`, "id")}${addAttribute(field.name, "name")} type="text"${addAttribute(field.placeholder || "Enter your full address", "placeholder")} class="mt-1 w-full border border-gray-300 rounded-lg px-4 py-3 text-gray-800 focus:ring-2 focus:ring-red-600 focus:border-transparent outline-none transition" autocomplete="off"${addAttribute(field.required, "required")}> <!-- Address suggestions dropdown --> <div${addAttribute(`${formId}-${field.name}-suggestions`, "id")} class="absolute z-10 w-full bg-white border border-gray-300 rounded-lg shadow-lg mt-1 hidden max-h-48 overflow-y-auto"></div> </div>`} </div>`), addAttribute(`${formId}-submit`, "id"), addAttribute(`${formId}-submit-text`, "id"), submitText, addAttribute(`${formId}-submit-loading`, "id"), defineScriptVars({ formId, formSource, apiEndpoint, fields, MAPBOX_TOKEN }));
}, "/Users/Zach/Github_Projects/fix-my-furnace/src/components/UniversalForm.astro", void 0);

export { $$UniversalForm as $ };
